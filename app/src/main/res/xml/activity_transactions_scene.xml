<?xml version="1.0" encoding="utf-8"?>
<MotionScene xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

  <Transition
      android:id="@+id/toolbar_transition"
      app:constraintSetStart="@id/expanded"
      app:constraintSetEnd="@+id/collapsed"
      app:layoutDuringTransition="honorRequest">
    <OnSwipe
        app:dragDirection="dragUp"
        app:touchAnchorId="@id/refresh_layout"
        app:touchAnchorSide="top"
        app:moveWhenScrollAtTop="true" />
    <KeyFrameSet>
      <KeyAttribute
          android:alpha="1"
          app:framePosition="0"
          app:motionTarget="@id/toolbar_layout_logo" />
      <KeyAttribute
          android:alpha="0"
          app:framePosition="50"
          app:motionTarget="@id/toolbar_layout_logo" />
      <KeyAttribute
          android:alpha="0"
          app:framePosition="100"
          app:motionProgress="1"
          app:motionTarget="@id/toolbar_layout_logo" />
      <KeyAttribute
          android:alpha="1"
          app:framePosition="0"
          app:motionTarget="@id/balance_subtitle" />
      <KeyAttribute
          android:alpha="0"
          app:framePosition="50"
          app:motionTarget="@id/balance_subtitle" />
      <KeyAttribute
          android:alpha="0"
          app:framePosition="100"
          app:motionTarget="@id/balance_subtitle" />
      <KeyPosition
          app:drawPath="pathRelative"
          app:percentX="1"
          app:percentY="1"
          app:framePosition="50"
          app:motionTarget="@id/balance" />
      <KeyAttribute
          android:scaleX="0.75"
          android:scaleY="0.75"
          app:framePosition="50"
          app:motionTarget="@id/balance" />
    </KeyFrameSet>
  </Transition>

  <ConstraintSet android:id="@+id/expanded">
    <Constraint
        android:id="@+id/collapsable_bar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minHeight="186dp"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
    <Constraint
        android:id="@+id/balance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="77dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        style="@style/ToolbarTextAppearance.Title.Expanded"
        android:scaleX="1.0"
        android:scaleY="1.0" />
    <Constraint android:id="@+id/system_view">
      <PropertySet
          app:applyMotionScene="false"
          app:visibilityMode="ignore" />
    </Constraint>
    <Constraint android:id="@+id/refresh_layout">
      <PropertySet
          app:applyMotionScene="false"
          app:visibilityMode="ignore" />
    </Constraint>
    <Constraint
        android:id="@+id/balance_subtitle"
        style="@style/TextAppearance.AppCompat.Body1.Roboto.Regular.Transparency"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="124dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:ellipsize="end"
        android:maxLines="1"
        android:paddingStart="15dp"
        android:paddingEnd="15dp" />

    <Constraint
        android:id="@+id/balance_skeleton"
        android:layout_width="wrap_content"
        android:layout_height="57dp"
        android:layout_marginTop="85dp"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:lottie_loop="true"
        app:lottie_rawRes="@raw/balance_skeleton"
        app:visibilityMode="ignore" />
    <Constraint
        android:id="@+id/top_up_wrapper"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_constraintBottom_toTopOf="@id/bottom_navigation"
        app:layout_constraintEnd_toEndOf="parent"
        app:visibilityMode="ignore" />
  </ConstraintSet>

  <ConstraintSet android:id="@+id/collapsed">
    <Constraint
        android:id="@+id/top_up_wrapper"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_constraintBottom_toTopOf="@id/bottom_navigation"
        app:layout_constraintEnd_toEndOf="parent"
        app:visibilityMode="ignore" />
    <Constraint
        android:id="@+id/collapsable_bar"
        android:layout_width="match_parent"
        android:layout_height="56dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent" />
    <Constraint
        android:id="@+id/balance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        style="@style/ToolbarTextAppearance.Title.Expanded"
        android:scaleX="0.75"
        android:scaleY="0.75" />

    <Constraint android:id="@+id/system_view">
      <PropertySet
          app:applyMotionScene="false"
          app:visibilityMode="ignore" />
    </Constraint>
    <Constraint android:id="@+id/refresh_layout">
      <PropertySet
          app:applyMotionScene="false"
          app:visibilityMode="ignore" />
    </Constraint>
    <Constraint
        android:id="@+id/balance_subtitle"
        style="@style/TextAppearance.AppCompat.Body1.Roboto.Regular.Transparency"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="0dp"
        app:layout_constraintBottom_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:ellipsize="end"
        android:maxLines="1"
        android:paddingStart="15dp"
        android:paddingEnd="15dp"></Constraint>

    <Constraint
        android:id="@+id/balance_skeleton"
        android:layout_width="wrap_content"
        android:layout_height="57dp"
        android:layout_marginTop="85dp"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:lottie_loop="true"
        app:lottie_rawRes="@raw/balance_skeleton"
        app:visibilityMode="ignore" />
  </ConstraintSet>

</MotionScene>
